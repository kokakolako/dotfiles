# Defaults
# ---------------------------------------------

## Path to your oh-my-zsh configuration.
export ZSH="$HOME/.config/oh-my-zsh"

## ZSH-Theme
export ZSH_THEME="kokakolako"

## Set source-path
source "$ZSH/oh-my-zsh.sh"

## Uncomment to change how often before auto-updates occur? (in days)
UPDATE_ZSH_DAYS=7

## Plugins
plugins=(git github jump colored-man vi-mode rvm)

# Vi-Mode settings
# ---------------------------------------------

## Enable Vi-Mode
bindkey -v

## Enable Emacs-Like incremental history search
bindkey "^R" history-incremental-search-backward

## Use vim cli mode
bindkey '^P' up-history
bindkey '^N' down-history

## backspace and ^h working even after returning from command mode
bindkey '^?' backward-delete-char
bindkey '^h' backward-delete-char

## ctrl-w removed word backwards
bindkey '^w' backward-kill-word

## ctrl-r starts searching history backward
bindkey '^r' history-incremental-search-backward

## Kill the lag when changing to normal mode
KEYTIMEOUT=1

# General Zsh settings
# ---------------------------------------------

## Set Auto-CD
setopt autocd

## Set Auto-Pushd
setopt autopushd

## Load a Mass Renaming Module
autoload -U zmv

# Aliases
# ---------------------------------------------

## Colorize grep
alias grep="grep --color=auto"
alias cp="rsync -aP"

## Show the Directory Stack as Stack
alias dirs="dirs -v"
alias pushd="pushd; dirs -v"
alias popd="popd; dirs -v"

## Vim aliases
alias vim="vim -u $HOME/.config/vim/vimrc"
alias vimkeys="vim $HOME/.config/vim/keymappings.vim"
alias vundle="vim $HOME/.config/vim/plugins.vim"
alias vimtipps="vim $HOME/.config/vim/vimtipps"

## Editing config files
alias iconfig="vim $HOME/.config/i3/config +'lcd $HOME/.config/i3'"
alias vconfig="vim $HOME/.config/vim/vimrc +'lcd $HOME/.config/vim'"
alias zconfig="vim $HOME/.config/zsh/zshrc +'lcd $HOME/.config/zsh'"
alias uconfig="vim $HOME/.config/X11/Xresources +'lcd $HOME/.config/X11'"
alias aconfig="vim $HOME/.config/zsh/zshrc +'normal :/Aliases<CR>' +'lcd $HOME/.config/zsh'"

## Sudo aliases
alias sctl="sudo systemctl"
alias shutdown="sudo shutdown"

## Start program with a customized config-file
alias ncmpcpp="ncmpcpp --config $HOME/.config/ncmpcpp/config"
alias nginx="nginx -c $HOME/.config/nginx/config"
alias pandoc="pandoc --latex-engine=xelatex"
alias tmux="tmux -f $HOME/.config/tmux/tmux.conf"
alias msmtp="msmtp -C $HOME/.config/msmtp/msmtprc"

## Misc aliases
alias virt-env="source $HOME/projekte/python/virt-env/bin/activate && cd $HOME/projekte/python/virt-env"
alias rlocate="locate --regex"
alias uzbl="uzbl-tabbed"

## Git Aliases
alias g="git"
alias gti="git"
alias gstatus="git status"
alias gpush="git push origin master"
alias greset="git reset"
alias ginit="git init"
alias gclone="git clone"
alias gcommit="git commit"
alias gdiff="git diff"
alias gadd="git add"
alias glog="git lg"
alias grm="git rm"
alias gcheckout="git checkout"
alias gbranch="git branch"

# Environment Variables
# ---------------------------------------------

## Misc
export TERMINAL=rxvt-unicode-256color
export TERM=rxvt-unicode-256color
export EDITOR="vim"
export VISUAL="vim"
export GIT_EDITOR="vim"
export MYVIMRC="$HOME/.config/vim/vimrc"
export MAIL="$HOME/mail"
export CONF="$HOME/.config"
export MARKPATH="$HOME/.marks"
export XDG_CONFIG_HOME="$HOME/.config"

## Adding the binfiles to $PATH
export PATH="$PATH:$HOME/.bin"

## Pass Passwortmanager Directory
export PASSWORD_STORE_DIR="$HOME/.password-store"

# Misc
# ---------------------------------------------

## Extract archive files easily
extract () {
    if [ -f $1 ] ; then
      case $1 in
        *.tar.bz2)   tar xjf $1     ;;
        *.tar.gz)    tar xzf $1     ;;
        *.bz2)       bunzip2 $1     ;;
        *.rar)       unrar e $1     ;;
        *.gz)        gunzip $1      ;;
        *.tar)       tar xf $1      ;;
        *.tbz2)      tar xjf $1     ;;
        *.tgz)       tar xzf $1     ;;
        *.zip)       unzip $1       ;;
        *.Z)         uncompress $1  ;;
        *.7z)        7z x $1        ;;
        *)     echo "'$1' cannot be extracted via extract()" ;;
         esac
     else
         echo "'$1' is not a valid file"
     fi
}

## Show dimensions of a picture
function dim () {
    sips $1 -g pixelWidth -g pixelHeight
}

## Use Ctr+Z to foreground vim
fancy-ctrl-z () {
  if [[ $#BUFFER -eq 0 ]]; then
    fg
    zle redisplay
  else
    zle push-input
    zle clear-screen
  fi
}
zle -N fancy-ctrl-z
bindkey '^Z' fancy-ctrl-z

## Disable visual bell
xset -b

## Fixing Dircolors
eval $(dircolors $HOME/.config/dircolors/molokai.dircolors)

# Adding rvm to the path
source ~/.rvm/scripts/rvm
export PATH="$PATH:$HOME/.rvm/bin" # Add RVM to PATH for scripting
